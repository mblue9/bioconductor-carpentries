---
title: "Instructors"
format: html
editor: visual
execute:
  message: false
  warning: false
  echo: false
---

```{r}
library(readr)
library(dplyr)
library(tidyr)
library(reactable)
library(ggmap)
library(plotly)
library(ggplot2)
```

```{r}
# Import data and format
instructors <- read_delim("https://raw.githubusercontent.com/Bioconductor/bioconductor-teaching/devel/bioc-instructors.md", delim = '|', trim_ws = TRUE) |> 
  filter(Name != "----------") |> 
  mutate(Status = "Certified")
```

Map and table showing people in the Bioconductor community who are certified Carpentries instructors or in the process of obtaining certification, such as those in the [Bioconductor Carpentries training program](https://bioconductor.github.io/biocblog/posts/2023-02-24-carpentries-update/). If you are certified and don't see your name, please add yourself as described in [this GitHub issue](https://github.com/Bioconductor/bioconductor-teaching/issues/22#issuecomment-1384258079).

See [this page](workshops.html) for Bioconductor Carpentries Workshops.

```{r}
# Get coordinates to map
instructors_geocoded <- instructors |> 
  mutate_geocode(Location)
```

```{r}

# Add instructor trainees from Bioc Carpentries Year 1
trainees_yr1 <- tibble::tribble(
  ~Name, ~Institution, ~Location, ~Status, ~lon, ~lat,
  "Fabricio Almeida-Silva", "VIB-UGent Center for Plant Systems Biology", "Ghent", "Certified - CZI Year 1", 3.7303351, 51.0500182,
  "Anand Ruban Agarvas", "University Hospital Heidelberg", "Heidelberg", "Certified - CZI Year 1", 8.6724335, 49.3987524,
  "Oliver Crook", "University of Oxford", "Oxford", "Certified - CZI Year 1", -1.2577263, 51.7520209,
  "Almut L√ºtge", "University of Z√ºrich", "Zurich", "Certified - CZI Year 1", 8.541694, 47.3768866,
  "Leo Lahti", "University of Turku", "Turku", "Certified - CZI Year 1", 22.2666303, 60.4518126,
  "Sehyun Oh", "City University of New York", "New York", "Certified - CZI Year 1", -74.0059728, 40.7127753,
  "Umar Ahmad", "Bauchi State University", "Gadau", "In Progress", 10.1661239, 11.8328495,
  "Chia Sin Liew", "University of Nebraska-Lincoln", "Nebraska", "Certified - CZI Year 1", -99.9018131, 41.4925374,
  "Charlotte Hutchings", "University of Cambridge", "Cambridge", "Certified - CZI Year 1", 0.1312729, 52.1950788,
  "Roberto Carlos √Ålvarez Mart√≠nez", "Universidad Autonoma de Queretaro", "Mexico", "In Progress", -102.552784, 23.634501,
  "David Shih", "University of Hong Kong", "Hong Kong", "Certified - CZI Year 1", 114.1693611, 22.3193039,
  "Rodrigo Arcoverde Cerveira da Silva", "Karolinska Institute", "Stockholm", "Certified - CZI Year 1", 18.0685808, 59.3293235,
  "Javier Carpinteyro Ponce", "University of Maryland", "Maryland", "Certified - CZI Year 1", -76.6412712, 39.0457549,
  "Zuguang Gu", "German Cancer Research Center", "Heidelberg", "Certified - CZI Year 1", 8.6724335, 49.3987524,
  "Givanna Putri", "Walter and Eliza Hall Institute of Medical Research", "Melbourne", "Certified - CZI Year 1", 144.9630576, -37.8136276,
  "Zedias Chikwambi", "Chinhoyi University of Technology", "Chinhoyi", "Certified - CZI Year 1", 30.1987245, -17.3622214,
  "Pageneck Chikondowa", "African Institute of Biomedical Science and Technology", "Harare", "Certified - CZI Year 1", 31.0492259, -17.8216288,
  "Marie Hidjo", "African Institute of Biomedical Science and Technology", "Harare", "Certified - CZI Year 1", 31.0492259, -17.8216288
)
```


```{r}
# Add instructor trainees from Bioc Carpentries Year 2
trainees_yr2 <- tibble::tribble(
  ~Name, ~Institution, ~Location, ~Status, ~lon, ~lat,
  "Kevin Stachelek", "University of Southern California", "Los Angeles", "In Progress", -118.285117, 34.0223519,
  "Erick Isaac Navarro Delgado", "University of British Columbia", "Vancouver", "In Progress", -123.1139524, 49.2608724,
  "Pedro Baldoni", "Walter and Eliza Hall Institute of Medical Research", "Melbourne", "Certified - CZI Year 2", 144.9582768, -37.7982827,
  "Princess Rodriguez", "University of Vermont", "Burlington", "In Progress", -73.212072, 44.4758825,
  "Tim Triche", "Van Andel Institute", "Grand Rapids", "Certified - CZI Year 2", -85.6680863, 42.9633604,
  "Izabela Mamede", "Universidade Federal de Minas Gerais", "Belo Horizonte", "Certified - CZI Year 2", -43.9678357, -19.870682,
  "Jacques Serizay", "Institut Pasteur", "Paris", "In Progress", 2.3522219, 48.856614,
  "Robert Ivanek", "University of Basel, Swiss Institute of Bioinformatics", "Basel", "Certified - CZI Year 2", 7.5885761, 47.5595986,
  "Hamdi Furkan Kepenek", "Abdullah G√ºl University", "Kayseri", "In Progress", 35.4867691, 38.731229,
  "ÈôàÁß≠Â¶Ç", "GuangZhou Lab", "Guangzhou", "In Progress", 113.264435, 23.129163,
  "Amal Boukteb", "National Institute for Agricultural Research of Tunisia (INRAT)", "Tunis", "Certified - CZI Year 2", 10.1815316, 36.8064948,
  "Arnab Mukherjee", "Manipal Institute of Technology", "Manipal", "Certified - CZI Year 2", 74.7928923, 13.3532052,
  "Harvinder Singh", "Department of Translational and Regenerative Medicine, PGIMER", "Chandigarh", "In Progress", 76.779418, 30.733315,
  "Janani Ravi", "University of Colorado Anschutz Medical Campus", "Aurora", "In Progress", -104.991531, 39.742043
)
```


```{r}
# Combine all data
all <- bind_rows(instructors_geocoded, trainees_yr1, trainees_yr2) |> 
  mutate(Status = factor(Status, levels = c(
  "Certified", 
  "Certified - CZI Year 1", 
  "Certified - CZI Year 2", 
  "In Progress")
  ))
```

```{r}
# Map of instructors
world_map <- map_data("world") |> 
  filter(region != "Antarctica")

gg <- ggplot() +
  geom_polygon(data = world_map, aes(x = long, y = lat, group = group), fill = "grey85", color = "white") +  # Pale grey countries with white borders
  geom_jitter(data = all, aes(x = lon, y = lat, text = paste(Name, Institution, sep = "\n"), 
                              colour = Status, fill = Status, shape = Status, size = Status)) +
  scale_colour_manual(values = c(
    "Certified" = "#0072B2", 
    "Certified - CZI Year 1" = "#009E73", 
    "Certified - CZI Year 2" = "#CC79A7", 
    "In Progress" = "#E69F00")) +
  scale_fill_manual(values = c(
    "Certified" = "#0072B2", 
    "Certified - CZI Year 1" = "#009E73", 
    "Certified - CZI Year 2" = "#CC79A7", 
    "In Progress" = "#E69F00")) +
  scale_shape_manual(values = c(
    "Certified" = 21,  # Filled Circle
    "Certified - CZI Year 1" = 22,  # Filled Square
    "Certified - CZI Year 2" = 24,  # Filled Diamond
    "In Progress" = 21  # Filled Circle
  )) +
  scale_size_manual(values = c(
    "Certified" = 1, 
    "Certified - CZI Year 1" = 1,  
    "Certified - CZI Year 2" = 1,  
    "In Progress" = 1
  )) +
  coord_sf(xlim = c(-180, 180), ylim = c(-60, 90), expand = FALSE) +  # Adjust x and y limits to minimize white space
  theme_void() +
  theme(
    panel.background = element_rect(fill = "white", color = NA),  # White background
    axis.line = element_blank(),  # No axis lines
    axis.text = element_blank(),  # No axis text
    axis.ticks = element_blank(),  # No axis ticks
    plot.background = element_rect(fill = "white", color = NA)  # Ensure no background around the map
  )

ggplotly(gg, tooltip = "text") |> 
  layout(xaxis = list(showline = FALSE, showticklabels = FALSE, zeroline = FALSE, title_standoff = 5),
         yaxis = list(showline = FALSE, showticklabels = FALSE, zeroline = FALSE))

```

<br></br>

```{r}
# Table of instructors
all |>   
    select(Name, Institution, Location, Status) |> 
  reactable(columns = list(
    Name = colDef(cell = function(value, index) {
      if (is.na(all$www[index])) {
        # If URL is NA, just display the name without a link
        value
        } else {
          # Render as a proper HTML link
          htmltools::tags$a(href = all$www[index], target = "_blank", value)
          }
      })
    ), 
    defaultSorted = "Name",
    defaultPageSize = 100)

```

However, looking at the world population density below from [Our World in Data](https://ourworldindata.org/grapher/population-density), we can see there are highly dense areas that have no or few trainers (e.g. India, China, Middle East, Africa, Latin America) so we still have a bit of a way to go! üåçüåéüåè

<iframe src="https://ourworldindata.org/grapher/population-density" loading="lazy" style="width: 100%; height: 600px; border: 0px none;">

</iframe>
